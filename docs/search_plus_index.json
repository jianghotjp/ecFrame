{"./":{"url":"./","title":"注","keywords":"","body":"[注]此文档为旧版文档，加华，ESHOP，EMALL 使用 "},"methods/mo-ban-yin-qing.html":{"url":"methods/mo-ban-yin-qing.html","title":"模板引擎","keywords":"","body":"使用artTemplate-3.0，原生语法版本，文档地址 "},"cssbu-fen/less.html":{"url":"cssbu-fen/less.html","title":"less","keywords":"","body":"使用less，工具库使用百度提供的est,编译less需输出map文件。 在less中定义了一些基本色，字体用5种黑色， @gray-darker: lighten(#000, 17%); // #2b2b2b @gray-dark: lighten(#000, 20%); // #333 @gray: lighten(#000, 40%); // #666 @gray-light: lighten(#000, 60%); // #999 @gray-lighter: lighten(#000, 93.5%); // #eee 主色调 @c-main: #4680d1; // 主色调 @c-main-light: #7ca9ea; // 浅主色调 状态色 @c-success: #56d146; // 成功 @c-info: #4680d1; // 信息 default和主色调相同 @c-warn: #f49127; // 警告 @c-error: #df3a3a; // 错误 价格颜色 @c-price: #ff5454; icon颜色 @c-icon: #ffaa06; "},"cssbu-fen/ji-ben-gong-ju-lei.html":{"url":"cssbu-fen/ji-ben-gong-ju-lei.html","title":"基本工具类","keywords":"","body":"基本工具类 , 微信端的工具类更多些，可去样式表头部查看 .l{ float: left; } .r{ float: right; } .fix{ *zoom: 1; *clear: both; } .fix:before, .fix:after { display: table; clear: both; content: ''; } .pr{ position: relative; } .hide{ display: none; } "},"cssbu-fen/tu-biao-ku.html":{"url":"cssbu-fen/tu-biao-ku.html","title":"图标库","keywords":"","body":"除了mui 和 Amazeui前端框架的图标外，没有新引入的图标库，项目中用到的图标需切图完成。 "},"jsbu-fen/quan-ju-bian-liang-page.html":{"url":"jsbu-fen/quan-ju-bian-liang-page.html","title":"全局变量 page","keywords":"","body":"定义了一个全局变量page作为页面数据命名空间，在其中存放页面中需要用到的变量，减少全局变量的污染。 `page.url` 对URL的操作 location.href = \"http://192.168.50.114:8083/m/ec/goods/index.html?id=1\" // 返回完整url page.url.url // http://192.168.50.114:8083/m/ec/goods/index.html?id=1 // 返回url参数 page.url.paras // {id: \"1\"} // 返回不包含参数的url page.url.pathname // http://192.168.50.114:8083/m/ec/goods/index.html // 取URL参数 page.url.get('id') // 1 // 设置URL参数 page.url.set({'kw':'abc'}) // http://192.168.50.114:8083/m/ec/goods/index.html?id=1&kw=abc // 重构url page.url.build() // 移除url参数 page.url.remove('id') // http://192.168.50.114:8083/m/ec/goods/index.html?kw=abc page.page 页码 默认0，应在success里做自增操作 page.pageSize 每页显示个数，默认10 "},"jsbu-fen/getjson.html":{"url":"jsbu-fen/getjson.html","title":"getJson","keywords":"","body":"getJson(url,param,success,error) 异步json获取 /** * 异步json获取 * @param {String} url 接口地址 * @param {Object} param 发送数据 * @param {Function} [success] 成功回调 * @param {Function} [error] 错误回调 */ getJson('/ec/goods/doFindGoods.do', { goodsId: 129 }, function (res) { if(!res.success){ mui.toast(res.errorMessage); setTimeout(function(){ mui.back(); },1000); } }) "},"jsbu-fen/getwidgetdata.html":{"url":"jsbu-fen/getwidgetdata.html","title":"getWidgetData","keywords":"","body":"getWidgetData(widgetName,type,success,error) 根据组件名称返回数据 [注] getWidgetData的 接口地址为/comm/widget/doSearchWidgetData.do，部分组件的接口地址不是这个地址，可自行封装。 /** * @param widgetName 组件中文名 * @param type 组件数据类型 * @param {Function} [success] 成功回调函数（返回data） * @param {Function} [error] 出错回调 */ getWidgetData('PC-首页顶部轮播下方多图广告位',2, function (res) { var data = { vars: vars, xData: res.data.widgetData }; renderTmp('#topSilderad', 'topSilderadTpl', data); lazyLoad.refresh(true); }); "},"jsbu-fen/rendertmp.html":{"url":"jsbu-fen/rendertmp.html","title":"renderTmp","keywords":"","body":"renderTmp(selector,tmpId,data,callback) 渲染模板，追加数据,传入callback时返回原生dom+html，不做数据追加处理,需手动追加。使用方式： /** * @param {String} selector 原生选择器，只处理第一个元素 * @param {String} tmpId 模板id，不需要加 # * @param {JSON} data 后台返回的json数据 * @param {Function} [callback] 回调函数 */ renderTmp('#topSilderad', 'topSilderadTpl', data); 或者： renderTmp('#topSilderad', 'topSilderadTpl', data，function(el,html){ el.innerHTML += Tpl; if(el.className.indexOf('show') "},"jsbu-fen/tonewpage.html":{"url":"jsbu-fen/tonewpage.html","title":"toNewPage","keywords":"","body":"toNewPage(href,cantBack) 处理页面跳转 /** * @param {String} href 要跳转的URL * @param {Boolean} [cantBack] true 是否禁止页面返回，替换url,默认false，为true时禁止页面返回 */ toNewPage('http://www.baidu.com',true); "},"jsbu-fen/cookiecao-zuo.html":{"url":"jsbu-fen/cookiecao-zuo.html","title":"Cookie操作","keywords":"","body":"setCookie(c_name,value,expiredays); getCookie(c_name); /** *c_name 键 *value值 *expiredays过期时间(毫秒) */ setCookie('name','Bob',10000); getCookie('name'); "},"jsbu-fen/localstoragecao-zuo.html":{"url":"jsbu-fen/localstoragecao-zuo.html","title":"localStorage操作","keywords":"","body":"使用前先判断浏览器支持情况 local.set(key,val,dur); local.get(key); /** * key 键 * val 值 * dur过期时间（小时） */ if(window.localStorage){ local.set('name','Bob',24); local.get('name'); } "},"jsbu-fen/imgformat.html":{"url":"jsbu-fen/imgformat.html","title":"imgFormat","keywords":"","body":"imgFormat(url,format,[isZip],[notForTpl]) 图片格式化集成错误图片替换，返回一个拼接好的URL ，输出时不转义输出，artTemplate需要加#，使用方式： /** *@param {String} url 图片路径， * @param {String}format 后台拦截器裁剪尺寸 *@param {Boolean} isZip 是否使用压缩（否的话原图输出）， *@param {Boolean} notForTpl只返回路径，不拼接img标签需要的onerror */ \"> "},"jsbu-fen/dateformat.html":{"url":"jsbu-fen/dateformat.html","title":"dateFormat","keywords":"","body":"dateFormat(date, format) 格式化时间 /** *@param {String} date 时间 格式为\"2017-05-25 00:00:00\"或\"2017/05/25 00:00:00\" *@param {String} format格式 'y'年， 'M'月份， 'd'日， 'h'小时， 'm'分， 's'秒 , 'q'季度 , 'S'毫秒 */ dateFormat(time,'yyyy-MM-dd hh:mm:ss') "},"jsbu-fen/moneyformat.html":{"url":"jsbu-fen/moneyformat.html","title":"moneyFormat","keywords":"","body":"moneyFormat(num, [format]) 格式化金额，每一个设置价格的地方都必须要使用moneyFormat /** * @param num 金额 * @param [format] 需保留的小数，不设置时原样输出 */ moneyFormat(3000,2) // \"3,000.00\" "},"jsbu-fen/base64.html":{"url":"jsbu-fen/base64.html","title":"Base64","keywords":"","body":"Base64 加密解密 toUri(str) 加密 fromUri(str) 解密 toUri(339) // \"MzM5\" fromUri(\"MzM5\") // \"339\" "},"jsbu-fen/checklogin.html":{"url":"jsbu-fen/checklogin.html","title":"checkLogin","keywords":"","body":"checkLogin(toLogin,callback) 判断是否登录 /** * 判断登录 * @param toLogin 如果未登录，是否进入登录页面,默认false * @param callback 如果是已登录状态时的回调函数 */ checkLogin(function(){ alert('已登录才执行') }) "},"jsbu-fen/rmoney.html":{"url":"jsbu-fen/rmoney.html","title":"rmoney","keywords":"","body":" 价格转换浮点型 把moneyFormat格式化后的金额转成number类型 rmoney('20,100') // 20100 "},"jsbu-fen/autogrow.html":{"url":"jsbu-fen/autogrow.html","title":"autoGrow","keywords":"","body":"autoGrow(selector) textarea内容超出自动扩展,不会出现滚动条，设置最大高度后才会出现滚动条 "},"jsbu-fen/ding-wei.html":{"url":"jsbu-fen/ding-wei.html","title":"定位","keywords":"","body":"若为微信端，可使用微信定位，moClient='wx'即可，否则使用百度定位 var moClient = $('#moClient').val(); jsLocation(moClient, function (city) { $('#userAddr').html(city); }); "},"jsbu-fen/vars.html":{"url":"jsbu-fen/vars.html","title":"vars","keywords":"","body":"`vars` 定义路径 var vars = { root: \"${vars.root}\", // 根目录 clientRoot: \"${vars.clientRoot}\", //根目录或根目录\\m，包含root uploadRoot: \"${vars.uploadRoot}\", //图片上传路径 resourceFolder:\"${vars.resourceFolder}\", // 资源路径 \\resources theme: { id: \"${vars.theme.id}\", //模板id emall-> default root: \"${vars.theme.root}\" //资源路径 \\resources } }; 使用方式： /ex/goods/index.html\"> "},"jsbu-fen/pageinit.html":{"url":"jsbu-fen/pageinit.html","title":"pageInit","keywords":"","body":"页面js需放在 pageInit 方法中 function pageInit() { // 页面代码 mui.init(); } "},"jsbu-fen/ri-li-cha-jian.html":{"url":"jsbu-fen/ri-li-cha-jian.html","title":"日历插件","keywords":"","body":"Simple-Calendar 无依赖，只有js和css文件。 配置项众多，添加标记的话需要设置option.showMark和mark两项，实例化后追加标记需要调用addmark和updateMark方法。 var options = { width: '500px', height: '500px', language: 'CH', //语言 showLunarCalendar: true, //阴历 showHoliday: true, //休假 showFestival: true, //节日 showLunarFestival: true, //农历节日 showSolarTerm: true, //节气 showMark: true, //标记 timeRange: { startYear: 1900, endYear: 2049 }, mark: { '2016-5-5': '上学' }, theme: { //主题颜色 changeAble: false, weeks: { backgroundColor: '#FBEC9C', fontColor: '#4A4A4A', fontSize: '20px', }, days: { backgroundColor: '#ffffff', fontColor: '#565555', fontSize: '24px' }, todaycolor: 'orange', activeSelectColor: 'orange', } } var myCalendar = new SimpleCalendar('#container',options); "},"jsbu-fen/dao-ji-shi-cha-jian.html":{"url":"jsbu-fen/dao-ji-shi-cha-jian.html","title":"倒计时插件","keywords":"","body":"DownCount 因需要传入服务器时间，在原来插件基础上做了修改： 00时 00分 00秒 $('.countdown').downCount({ date: date, //结束时间 offset: +8, //时区 now_date: now_date //开始时间、服务器时间 }, function () { // 倒计时执行完回调函数 }); "},"jsbu-fen/er-wei-ma-sheng-cheng.html":{"url":"jsbu-fen/er-wei-ma-sheng-cheng.html","title":"二维码生成","keywords":"","body":"依赖qrcode.js（实现二维码数据计算的核心类）和 jquery.qrcode.js（把qrcode用jquery方式封装起来的，用它来实现图形渲染，支持canvas和table两种方式），使用方式： $('#output').qrcode('http://www.jerei.com') "},"jsbu-fen/html2canvas.html":{"url":"jsbu-fen/html2canvas.html","title":"html2canvas","keywords":"","body":"html2canvas html转成图片 因直接截图不清晰，所以在源码基础上做了调整，传参时宽高要乘2，html里的图片不要用百分比设置宽高，否则会缩小变形。 var ct = $('.mui-content'); var width = ct.width(); var height = ct.height(); html2canvas(ct, { timeout: 300, width: width * 2, height: height * 2, onrendered: function (canvas) { // 回调 } }); "},"wei-xin-duan/qian-duan-kuang-jia/kuang-jia.html":{"url":"wei-xin-duan/qian-duan-kuang-jia/kuang-jia.html","title":"框架","keywords":"","body":"使用mui作为前端框架，官方文档地址 "},"wei-xin-duan/css/css.html":{"url":"wei-xin-duan/css/css.html","title":"CSS","keywords":"","body":"使用rem做单位，设计图宽度750px，定义html的font-size为 13.33333333vw，即1rem=100px。body的font-size为0.32rem，即16px。 对mui的hack在mui.util.less中。 使用雪碧图，切图注意rem的小数像素问题。 渲染模板时，被追加数据的元素需要加dataContent的class，主要作用设置透明度为0，追加完数据后会自动加show的class，透明度置为1，使用方式： "},"wei-xin-duan/jsbu-fen/jqueryban-ben.html":{"url":"wei-xin-duan/jsbu-fen/jqueryban-ben.html","title":"jQuery版本","keywords":"","body":"jQuery3.1.0 无ajax无animate "},"wei-xin-duan/jsbu-fen/ajax.html":{"url":"wei-xin-duan/jsbu-fen/ajax.html","title":"ajax","keywords":"","body":"使用mui提供的ajax方法 mui.ajax({ type: 'POST', url: url, data: param, dataType: 'json', success: function (res) { }, error:function(msg){ }); "},"wei-xin-duan/jsbu-fen/debug.html":{"url":"wei-xin-duan/jsbu-fen/debug.html","title":"debug","keywords":"","body":"微信端真机调试不方便，引入debug，在原来基础上做了封装，使用时在URL上拼接\"_debug=true\",js里需console要输出的信息 "},"wei-xin-duan/jsbu-fen/fan-hui-qiang-zhi-shua-xin.html":{"url":"wei-xin-duan/jsbu-fen/fan-hui-qiang-zhi-shua-xin.html","title":"返回强制刷新","keywords":"","body":"ios端有返回上一级页面不刷新的问题，此方法可强制执行js，但由后端模板引擎渲染的页面无法刷新 window.addEventListener('pagehide', function(e) { var $body = $(document.body); $body.children().remove(); // 要等到回调函数完成，用户按返回才执行script标签的代码 setTimeout(function() { $body.append(\"window.location.reload();\"); }); }); "},"wei-xin-duan/jsbu-fen/loading.html":{"url":"wei-xin-duan/jsbu-fen/loading.html","title":"loading","keywords":"","body":"loading 进度条 [注] 进页面会有默认的loading，若页面有getJson请求，则会在请求完毕后自动关闭，若没有需手动关闭 loading.ing(); // 进度条显示 loading.done();// 进度条隐藏 "},"wei-xin-duan/jsbu-fen/reloadpull.html":{"url":"wei-xin-duan/jsbu-fen/reloadpull.html","title":"reloadPull","keywords":"","body":"清空重置上拉加载 需要手动设置页码以及清空dom,会自动触发一次上拉 "},"wei-xin-duan/jsbu-fen/zhan-wei-tu.html":{"url":"wei-xin-duan/jsbu-fen/zhan-wei-tu.html","title":"占位图","keywords":"","body":"可以手动设置在元素上加dataContent和seize的class，然后设置高度，或者用js设置在getJson/getWidgetData时多传一个参数，同时被追加的元素加data-height属性，使用如下： .sort_left{height:4rem}; 或者： getWidgetData(data.name, data.datatype, function (res) { var widgetData = { vars: vars, xData: res.data.widgetData || null }; renderTmp(el, data.tplid, widgetData); lazyLoad.refresh(true); },'#sortListLeft'); "},"wei-xin-duan/jsbu-fen/toast.html":{"url":"wei-xin-duan/jsbu-fen/toast.html","title":"toast","keywords":"","body":"toast(message, type) 弹出提示 /** * toast * @param {string} message 弹出字符串 * @param {string} type success/info/warn/error 四种类型 */ tosat('some message','success') "},"wei-xin-duan/jsbu-fen/cha-jian/lan-jia-zai.html":{"url":"wei-xin-duan/jsbu-fen/cha-jian/lan-jia-zai.html","title":"懒加载","keywords":"","body":"使用mui提供的懒加载,每次新增图片都要调用refresh方法更新，初始化懒加载的代码在common中，若要替换图片，可到common中修改 // common var lazyLoad = mui('body').imageLazyload({ placeholder: '/resources/images/placeholder.png', autoDestroy: false }); 使用方式： lazyLoad.refresh(true); "},"wei-xin-duan/jsbu-fen/cha-jian/tu-pian-shang-chuan.html":{"url":"wei-xin-duan/jsbu-fen/cha-jian/tu-pian-shang-chuan.html","title":"图片上传","keywords":"","body":"微信端的图片上传是把图片转成base64格式再上传,依赖jQuery版本为1.11.0，支持裁剪，需要的文件在\\include\\c_multi_img_upload.ftl中，使用方式： $(function () { uploadComponent._options.width = 350; //裁剪区域宽高 uploadComponent._options.height = 350; uploadComponent._options.noclip = true; // 是否裁剪 uploadComponent._options.rate = .66; // 压缩比率 uploadComponent.init(); }); "},"wei-xin-duan/jsbu-fen/cha-jian/hua-dong-yan-zheng.html":{"url":"wei-xin-duan/jsbu-fen/cha-jian/hua-dong-yan-zheng.html","title":"滑动验证","keywords":"","body":"range 滑动验证 验证后page.flag等于0，否则等于1 向右滑动验证 欢迎登陆英纳维胜商城 成功 range(); "},"pcduan/qian-duan-kuang-jia/qian-duan-kuang-jia.html":{"url":"pcduan/qian-duan-kuang-jia/qian-duan-kuang-jia.html","title":"前端框架","keywords":"","body":"使用Amaze UI作为前端框架，官方文档地址 "},"pcduan/css.html":{"url":"pcduan/css.html","title":"CSS","keywords":"","body":"相比微信端，PC端less定义的基础样式更多， @support-ie-version: 8; // 支持的浏览器版本 @support-html5: true; // 支持HTML5 @default-font-size: 16px; // 默认字号 @default-border-width: 1px; // 默认边框宽度 @default-border-radius: 2px; // 默认圆角 @default-transform-duration: .2s; // 默认动画时长 // font 字体 @code: Monaco, Menlo, Consolas, \"Courier New\", \"FontAwesome\", monospace; @sans-serif: \"Segoe UI\", \"Lucida Grande\", Helvetica, Arial, \"Microsoft YaHei\", FreeSans, Arimo, \"Droid Sans\", \"wenquanyi micro hei\", \"Hiragino Sans GB\", \"Hiragino Sans GB W3\", \"FontAwesome\", sans-serif; @serif: Georgia, \"Times New Roman\", Times, Kai, \"Kaiti SC\", KaiTi, BiauKai, \"FontAwesome\", serif; @body-bg:#f4f4f4; //body "},"pcduan/commonzhong-de-gong-yong-fang-fa/tu-pian-shang-chuan.html":{"url":"pcduan/commonzhong-de-gong-yong-fang-fa/tu-pian-shang-chuan.html","title":"图片上传","keywords":"","body":"使用百度提供的 WebUploader 0.1.5版本 定义了webupload\\(btn,list,num\\)方法，btn 上传按钮 ， list 追加图片的列表,每个item中.info存放图片url ， num 允许上传图片的个数,使用方式： + webupload('upload_btn','upLoad_list',3); 其中，upLoad_list和upload_btn为必要结构，图片上传后的URL存放在每个file-item的span.imgUrl中 "},"pcduan/pu-bu-liu.html":{"url":"pcduan/pu-bu-liu.html","title":"瀑布流","keywords":"","body":"使用Masonry，瀑布流的懒加载使用imagesLoaded var msny=$('#postingsList').masonry({ //初始化 itemSelector: '.postings_item' }); // 新增图片后更新 msny.imagesLoaded().progress( function(instance, image) { if(!image.isLoaded ){ $(image.img).attr('src',vars.theme.root+\"/resources/images/placeholder.png\").css('height','200px') } msny.masonry('layout').masonry('reloadItems'); }); "},"pcduan/hua-dong-yan-zheng.html":{"url":"pcduan/hua-dong-yan-zheng.html","title":"滑动验证","keywords":"","body":"使用jquery.slideunlock.js，在源码基础上做了调整，增加重置方法， >> 拖动滑块验证 var slider = new SliderUnlock('#range', { successLabelTip: '欢迎登录EMALL商城' }, function() { // 滑动验证成功 if (!$('#mobile').hasClass('lenPassed')) { toast('请填写手机号', 'warning'); slider.restart();// 重置 } else if (!$('#mobile').hasClass('passed')) { toast('手机号格式错误', 'warning'); slider.restart(); } else { $('.step1 .am-btn').removeClass('am-disabled'); } }); slider.init(); "},"pcduan/lan-jia-zai.html":{"url":"pcduan/lan-jia-zai.html","title":"懒加载","keywords":"","body":"使用jquery-lazyload，common中做了处理，使用方式与mui的懒加载基本一致： lazyLoad.refresh(); "},"pcduan/toast.html":{"url":"pcduan/toast.html","title":"toast","keywords":"","body":"仿照mui.toast，结合AmazeUI的模态窗 /** *data 要弹出的内容 ， *[type] toast样式 success，error，warning，默认success ， *[callback] 回调，关闭时执行 */ toast('请填写手机号', 'warning'); "},"pcduan/fang-da-jing.html":{"url":"pcduan/fang-da-jing.html","title":"放大镜","keywords":"","body":"基于AmazeUI的插件Amaze UI Magnifier $(function() { $('#small-image').magnify({ shape: 'rect', width: 120 }); }); "},"pcduan/fen-ye-cha-jian.html":{"url":"pcduan/fen-ye-cha-jian.html","title":"分页插件","keywords":"","body":"参数列表： pageCount - 页面总数。必填。 current - 当前页码。必填。 type - 提供两种分页方式，默认是带数字的分页type1，翻页式为type2。必填。 showLen - 分页显示页码总个数。选填。 side=2 - 分页两侧显示页码个数。选填。 center=5 - 分页中间显示页码个数。选填。 callback=function(current,obj,args){} - 点击页码或上一页/下一页按钮时提供回调函数。选填。注意：传递回调函数后，将阻止页面数字按钮和翻页按钮的页面跳转事件。 hideForOnlyOnePage - 当页面长度为1时是否需要加载分页插件，true为不加载。选填。 使用方式： $('#btmPaging').createPage({ current: page.page, type: 1, pageCount: pageCount, side: 5, center: 3, showLen: 11, callback: function (curidx, obj) { page.page = curidx; $('#container').empty(); $('#btmPaging0').empty(); getData(); $('.footer').hide(); $(window).scrollTop(0); $('.footer').show() } }); "}}